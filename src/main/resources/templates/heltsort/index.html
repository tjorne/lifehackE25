<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8"/>
    <title>Er det helt sort?!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <!-- Thymeleaf vil erstatte th:href; den ‚Äúplain‚Äù href virker ved ren statisk visning -->
    <link rel="stylesheet" href="/css/erdetheltsort.css" th:href="@{/css/erdetheltsort.css}"/>
</head>
<body>

<!-- Header med logo -->
<header>
    <button>
        <a href="index.html" th:href="@{/}">üè†Home</a>
    </button>

    <a href="index.html" th:href="@{/}">
        <img src="/images/heltsort/erdetheltsort_long.png"
             alt="Er det helt sort?!"
             th:src="@{/images/heltsort/erdetheltsort_long.png}"/>
    </a>

    <button id="themeSwitch" type="button">üåìMode</button>
</header>
<main>
    <!-- Beregner sektion -->
    <div class="calculator-container">
        <!-- Velkommen sektion -->
        <section>
            <h1>Proffesionelt arbejde, med et glimt i √∏jet</h1>
            <p>F√• et hurtigt overblik over prisen p√• malerarbejde ‚Äì uden moms og uden mellemled.<br>
                V√¶lg v√¶gtypen, indtast dine m√•l, og se hvad ‚Äúhelt sort‚Äù egentlig koster.</p>
        </section>
        <br>
        <!-- Titel -->
        <section class="title-container">
            <h2>V√¶lg din v√¶gtype &amp; inds√¶t dine m√•l</h2>
        </section>

        <!-- Brug th:action, s√• backenden rammes korrekt -->
        <form method="post" th:action="@{/getresult}">
            <!-- Materiale radio knapper -->
            <section class="radio-group">
                <label>
                    <input type="radio" name="materiale" value="Gasbeton/Beton"
                           th:checked="${materiale == 'Gasbeton/Beton'}" checked>
                    Gasbeton/Beton
                </label>
                <label>
                    <input type="radio" name="materiale" value="Gips"
                           th:checked="${materiale == null or materiale=='Gips'}">
                    Gips
                </label>
                <label>
                    <input type="radio" name="materiale" value="Eksisterende v√¶g"
                           th:checked="${materiale == 'Eksisterende v√¶g'}">
                    Eksisterende v√¶g/loft
                </label>

            </section>

            <!-- Toggle + input felter -->
            <section class="areas-container">
                <!-- skjulte radioer styrer toggle -->
                <!-- M2 er valgt som default, hvis mode er null ELLER 'm2' -->
                <input id="mode-m2" class="hidden-radio" type="radio" name="mode" value="m2"
                       th:checked="${mode == null or mode == 'm2'}" checked>

                <input id="mode-hb" class="hidden-radio" type="radio" name="mode" value="hb"
                       th:checked="${mode == 'hb'}">


                <!-- Toggle UI -->
                <div class="toggle" role="tablist" aria-label="Input-tilstand">
                    <label for="mode-m2" class="toggle-option" role="tab" aria-selected="true">M¬≤</label>
                    <label for="mode-hb" class="toggle-option" role="tab">H√∏jde √ó Bredde</label>
                    <span class="toggle-thumb" aria-hidden="true"></span>
                </div>

                <!-- Input hvis M2 er valgt -->
                <div class="mode mode-m2">
                    <label>
                        M¬≤
                        <input type="number" name="m2" step="0.01" placeholder="fx 40" th:value="${m2}">
                    </label>
                </div>

                <!-- Input hvis H√óB er valgt -->
                <div class="mode mode-hb">
                    <label>
                        H√∏jde (m)
                        <input type="number" name="height" step="0.01" placeholder="fx 2.4" th:value="${height}">
                    </label>
                    <label>
                        Bredde (m)
                        <input type="number" name="width" step="0.01" placeholder="fx 5" th:value="${width}">
                    </label>
                </div>

                <!-- Beregn knap -->
                <div class="centerBox">
                    <button type="submit" formaction="getresult">Beregn vejledende pris</button>
                </div>
            </section>
        </form>
    </div>

    <!-- Fejlbesked centreret -->
    <div class="centerBox">
        <p class="error" th:if="${session.inputerror != null}" th:text="${session.inputerror}"></p>
    </div>
</main>

<footer>
    <a href="https://github.com/Obliwobbi" th:href="@{https://github.com/Obliwobbi}" target="_blank">
        <img src="/images/heltsort/streamline-ultimate-color--github-logo-1.png"
             alt="Toby's Github"
             th:src="@{/images/heltsort/streamline-ultimate-color--github-logo-1.png}"/>
    </a>
    <h3>Project by</h3>
    <a href="https://github.com/JesperTAndersen" th:href="@{https://github.com/JesperTAndersen}" target="_blank">
        <img id="rightimg" src="/images/heltsort/streamline-ultimate-color--github-logo-1.png"
             alt="Jesper's Github"
             th:src="@{/images/heltsort/streamline-ultimate-color--github-logo-1.png}"/>
    </a>
</footer>

<script>
    // Apply saved theme on load
    (function applySavedTheme() {
        try {
            const saved = localStorage.getItem('theme'); // 'light' | 'dark' | null
            if (saved === 'light') {
                document.body.classList.add('light'); // matches your CSS: body.light { ... }
            }
        } catch (_) { /* ignore private mode errors etc. */
        }
    })();

    // Toggle + persist
    (function wireThemeSwitcher() {
        const btn = document.getElementById('themeSwitch');
        if (!btn) return;

        btn.addEventListener('click', () => {
            const isLight = document.body.classList.toggle('light');
            try {
                localStorage.setItem('theme', isLight ? 'light' : 'dark');
            } catch (_) { /* ignore */
            }
        });
    })();
</script>

</body>
</html>
